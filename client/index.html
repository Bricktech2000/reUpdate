<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>reUpdate</title>
</head>
<body>
  <script type="module">
    import {reUpdate} from './reUpdate-client.js';
    window.reUpdate = reUpdate;
    reUpdate.log();
  </script>
  <<<vars.test = 'test'>>>
  << console.log('This is a <<<yield vars.test>>>.') >>

  <button onclick="toggleButtonState()">Toggle State</button>
  << toggleButtonState = () => watch.buttonState = !watch.buttonState >>
  State: << yield watch.buttonState || false >>
  <br>
  
  << yield 'This is a <b>raw HTML</b> include' >>
  <br>
  Here is a test error: <<<throw new Error('This is a test error.')>>>
  <br>
  Your IP is <<<yield params.req.connection.remoteAddress>>>
  <br>
  <<
    await utils.sleep(1000);
    yield '1<br>';
    await utils.sleep(1000);
    yield '2<br>';
    await utils.sleep(1000);
    yield '3<br>';
  >>
  <<
    await utils.sleep(4000);
    for(var i = 0; i < 50; i++){
      await utils.sleep(50);
      yield '#';
    }
  >>
  <br>
  << watch.type = 'dynamically' >>
  << ChangeType = () => watch.type = 'reUpdate' >>
  <button onclick="ChangeType()">Change Type</button>
  <<
    yield include('/page.html', {type: watch.type});
  >>
  <<<
    yield include('/page.html', {type: 'statically'});
  >>>
</body>
</html>
